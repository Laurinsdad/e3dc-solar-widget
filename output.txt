<!DOCTYPE html>
<html>
    <head>
        <title>Portal</title>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
                <meta name="format-detection" content="telephone=no"/>
                <meta http-equiv="X-UA-Compatible" content="IE=edge" />
                <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
        <link rel="stylesheet" href="css/E3DC/format.css" media="screen" />
<link rel="stylesheet" href="css/E3DC/print.css" media="print" />
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link rel="stylesheet" href="css/buttons.css" type="text/css" />
<link rel="stylesheet" href="css/icons.css" media="screen" />
<link rel="stylesheet" href="css/fonts.css" media="screen" />
<link href="/lib/js/jquery-ui/css/smoothness/jquery-ui-1.10.4.custom.css" rel="stylesheet" type="text/css" />
<link href="/lib/js/jquery/jquery.svg.css" rel="stylesheet" type="text/css" />
<link href="/lib/js/footable/css/footable.core.css" rel="stylesheet" type="text/css" />
<link href="/lib/js/footable/css/footable.metro.css" rel="stylesheet" type="text/css" />
<link href="/lib/js/tooltipster/css/tooltipster.css" rel="stylesheet" type="text/css" />
<link href="/lib/js/select2/css/select2.css" rel="stylesheet" type="text/css" />
<link href="css/react_root.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="js/geocoding.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery.js"></script>
<script type="text/javascript" src="/lib/js/jquery-ui/js/jquery-ui-1.10.4.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery.color.js"></script>
<script type="text/javascript" src="/lib/js/footable/js/footable.js"></script>
<script type="text/javascript" src="/lib/js/footable/js/footable.sort.js"></script>
<script type="text/javascript" src="/lib/js/footable/js/footable.paginate.js"></script>
<script type="text/javascript" src="/lib/js/footable/js/footable.filter.js"></script>
<script type="text/javascript" src="/lib/js/highcharts/js/highcharts.js"></script>
<script type="text/javascript" src="/lib/js/highcharts/js/highcharts-more.js"></script>
<script type="text/javascript" src="/lib/js/highcharts/js/exporting.src.js"></script>
<script type="text/javascript" src="/lib/js/highcharts/js/modules/solid-gauge.js"></script>
<script type="text/javascript" src="/lib/js/date.js"></script>
<script type="text/javascript" src="/lib/js/noty/js/noty/packaged/jquery.noty.packaged.js"></script>
<script type="text/javascript" src="/lib/js/noty/js/noty/themes/notySurvey.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery-ui-slider-access-addon.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery.svg.js"></script>
<script type="text/javascript" src="/lib/js/jquery/jquery.svganim.js"></script>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyDn0IzuDTufQyx1k0wL-M5NXFKn5gPn1XY"></script>
<script type="text/javascript" src="/lib/js/HPNeo-gmaps/gmaps.js"></script>
<script type="text/javascript" src="/lib/js/HPNeo-gmaps/markerclusterer.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf_plugin_javascript.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf_plugin_addimage.js"></script>
<script type="text/javascript" src="/lib/js/freewall/freewall.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf_plugin_cell.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf_plugin_standard_fonts_metrics.js"></script>
<script type="text/javascript" src="/lib/js/jspdf/jspdf_plugin_split_text_to_size.js"></script>
<script type="text/javascript" src="/lib/js/FileSaver.js"></script>
<script type="text/javascript" src="/lib/js/tooltipster/js/jquery.tooltipster.min.js"></script>
<script type="text/javascript" src="/lib/js/freewall/freewall.js"></script>
<script type="text/javascript" src="js/rscpLibV0.9.3.min.js"></script>
<script type="text/javascript" src="/lib/js/knockout/knockout-3.2.0.js"></script>
<script type="text/javascript" src="/lib/js/knockout/knockout.mapping.js"></script>
<script type="text/javascript" src="/lib/js/knockout/knockout.editables.js"></script>
<script type="text/javascript" src="/lib/js/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/lib/js/ckeditor/adapters/jquery.js"></script>
<script type="text/javascript" src="/lib/js/localforage.min.js"></script>
<script type="text/javascript" src="/lib/js/plumb/plumb.js"></script>
<script type="text/javascript" src="/lib/js/d3.v3.min.js"></script>
<script type="text/javascript" src="js/define-getter-shim.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/grid.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/version.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/detector.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/formatinf.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/errorlevel.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/bitmat.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/datablock.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/bmparser.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/datamask.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/rsdecoder.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/gf256poly.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/gf256.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/decoder.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/qrcode.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/findpat.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/alignpat.js"></script>
<script type="text/javascript" src="/lib/js/qrdecoder/databr.js"></script>
<script type="text/javascript" src="/lib/js/html2canvas/html2canvas.min.js"></script>
<script type="text/javascript" src="/lib/js/select2/js/select2.min.js"></script>
<script type="text/javascript" src="/lib/js/select2/js/select2_locale_de.js"></script>
<script>window.websocketURL = "wss://s10.e3dc.com/ws";</script>
<script type="text/javascript" src="js/e3dcKOComponents.js"></script>
<script type="text/javascript" src="js/DataProxy.js"></script>
<script type="text/javascript" src="js/Logger.js"></script>
<script type="text/javascript" src="js/language.js"></script>
<script type="text/javascript" src="js/alerts.js"></script>
<script type="text/javascript" src="js/jsbn.js"></script>
<script type="text/javascript" src="js/prng4.js"></script>
<script type="text/javascript" src="js/rsa.js"></script>
<script type="text/javascript" src="js/rng.js"></script>
<script type="application/javascript">

/*
 * get username and password from login dialog an
 * try to create a session
 */
function login () {    
    var oldPassword = $("#password").val();
    passwordChecker(oldPassword).then(function(statusOldPass){
        try {
            var strUsername = $("#username").val().trim();
            // var strPassword = rsa.encrypt($("#password").val());
            var strPassword = $("#password").val() ? md5($("#password").val()) : "";
            // if(strPassword === rsa.encrypt("#_md5_#")) strPassword = pw;
            if(strPassword === md5("#_md5_#")) strPassword = pw;
            if (strUsername !== "" && strPassword !== "") {
                IDUSER = $("#username").val().trim();
                IDPASSWD = $("#password").val();
                
                var req="DO=LOGIN&USERNAME="+strUsername+"&PASSWD="+strPassword;
                dataProxy.http.request(req).then(function(jobj){
                    
                    if (parseInt(jobj.ERRNO) === 0) {
                        if($("#radiosavelogin").is(":checked")) {
                            try {
                                localforage.setItem("username",strUsername);
                                localforage.setItem("passwd",strPassword);
                                localforage.setItem("loginsave",2);                            
                            } catch (e) {
                            }
                        } else {
                            try {
                                localforage.setItem("username",strUsername);
                                localforage.setItem("passwd",strPassword);
                                localforage.setItem("loginsave",0);
                            } catch (e) {
                            }
                        }


                        $('#IDLOGINDIV').fadeOut(350);
                        $('#IDROOT').fadeIn(350);
                        $('#IDMENU_MAIN').html(jobj.CONTENT.MAIN);
                        $('#IDMENU_SUB').html(jobj.CONTENT.SUB);
                        if(typeof strUsername === "undefined" || strUsername === "" || strPassword === "" || typeof strPassword === "undefined"){
                            return localforage.getItem("username")
                            .then(function(username){
                                strUsername = username;
                                return localforage.getItem("passwd")	
                            }).then(function(passwd){
                                strPassword = passwd;
                                if(strUsername !== "null" && strPassword !== "null"){
                                    dataProxy.rscp.login(strUsername.trim(),strPassword).catch(function(err){
                                        console.error(err);
                                    });
                                }
                            });
                        }
                        else {
                            dataProxy.rscp.login(strUsername.trim(),strPassword).catch(function(err){
                                console.error(err);
                            });
                        }
                        initPageContentAndMenuStructur();
                        //getWelcome();
                        if (!statusOldPass) {
                            showUpdatePassword(strPassword).then(function(finishUpdatePass){
                                if (finishUpdatePass){
                                        showTipsOfTheDay();
                                        if ( (jobj.CONTENT.USERLEVEL === 8 || jobj.CONTENT.USERLEVEL === 16 || jobj.CONTENT.USERLEVEL === 32) && !($.getUrlParameter("moduleid") || $.getUrlParameter("serialno")) ) {
                                            getContent('IDDASHBOARD');
                                        } else {
                                            getLastContent();    
                                        }
                                        localforage.getItem("loginsave").then(function(save){
                                            if(save > 0){
                                                localforage.setItem("loginsave",2);                                                
                                            }
                                        },function(err){
                                            console.error(err);
                                        });
                                }                                   
                            }, function(err) {
                                    console.error(err)
                            });
                        } else {
                            showTipsOfTheDay();
                            if ( (jobj.CONTENT.USERLEVEL === 8 || jobj.CONTENT.USERLEVEL === 16 || jobj.CONTENT.USERLEVEL === 32) && !($.getUrlParameter("moduleid") || $.getUrlParameter("serialno")) ) {
                                getContent('IDDASHBOARD');
                            } else {
                                getLastContent();    
                            }
                            localforage.getItem("loginsave").then(function(save){
                                if(save == 1){
                                    localforage.setItem("loginsave",2);                                                
                                }
                            },function(err){
                                console.error(err);
                            });
                        }                                                
                    } else if (parseInt(jobj.ERRNO) === -2) {
                        AXAlert("Database fault");
                    } else  {
                        $('#IDLOGINMOVE').effect("shake");
                        localforage.removeItem("passwd");
                        $("#password").val("");
                    }
                },function(err){
                    $('#IDLOGINMOVE').effect("shake");
                    localforage.removeItem("passwd");
                    $("#password").val("");
                    console.error(err);	
                });
            } else {
                $('#IDLOGINMOVE').effect("shake");
            }
        } catch (e) {
            localforage.removeItem("passwd");
            $("#password").val("");
            console.error("func: login() %s",e);
        }     
    }, function(err) {
            console.error(err)
    });
	
}

function passwordChecker(oldPass){        
    return new Promise(function(resolve, reject){
        var strUsername = $("#username").val().trim();
        if (oldPass === "#_md5_#" || (strUsername === "referenz") || (strUsername === "e3dc")
         || (strUsername === "e3dc-dev.user") || (strUsername === "e3dc-dev.service") || (strUsername === "e3dc-dev.partner")
         || (strUsername === "e3dc-dev.owner") || (strUsername === "e3dc-dev.inst") || strUsername === "e3dc-dev.ext_service" || strUsername === "e3dc-dev.sales"){
			window.OWNER = 3;
            resolve(true);
        } else {
            var resultTest = passwordTest(oldPass);
            if (resultTest) {
                resolve(true);
            } else {               
                resolve(false);           
            }    
        }        
    });
}

function disableF5(e){
    if ((e.which || e.keyCode) == 116){
        e.preventDefault();
    }  
};

function checkCurrPass(oldPass) {
    // return dataProxy.http.request("DO=CHECKCURRPASS&username="+$("#usernameNewPass").val()+"&currPass=" + md5($("#passwordOld").val()));
    // var oldPass2 = rsa.encrypt($("#passwordOld").val());
    var oldPass2 = md5($("#passwordOld").val());
    if (oldPass2 === oldPass){
        return true;
    } else {
        return false;
    }
}

function passwordTest(pass){
    $(document).on("keydown", disableF5);
    if (pass !== ""){
        var checkPass = e3dcCheckPassword(pass);
        return checkPass;
    } 
        
    function e3dcPasswordLongEnough(passwd) {        
        if (passwd.length > 7) {
            return true;
        }
        else {
            return false;
        }
    }
    
    function e3dcContainsUpperAndLowercase(passwd) {
        var i;
        var lowercaseChars = "qwertzuiopüasdfghjklöäyxcvbnmß";
        var uppercaseChars = "QWERTZUIOPÜASDFGHJKLÖÄYXCVBNM";
        var containsUpper = false;
        var containsLower = false;
        for (i = 0; i < lowercaseChars.length; i++) {
            if (passwd.indexOf(lowercaseChars.charAt(i)) !== -1) {
                containsLower = true;
            }
        }
        for (i = 0; i < uppercaseChars.length; i++) {
            if (passwd.indexOf(uppercaseChars.charAt(i)) !== -1) {
                containsUpper = true;
            }
        }
        if (containsLower && containsUpper) {
            return true;
        }
        else {
            return false;
        }
    }
    
    function e3dcContainsIllegalChar(passwd) {
        var i;
        var specialChars = "-+|@_\"/\\;:.,# ";
        var lowercaseChars = "qwertzuiopüasdfghjklöäyxcvbnmß";
        var uppercaseChars = "QWERTZUIOPÜASDFGHJKLÖÄYXCVBNM";
        var numbers = "0123456789";
        var containedIllegalChars = "";
        
        for (i = 0; i < passwd.length; i++) {
            if (specialChars.indexOf(passwd.charAt(i)) !== -1) {
                continue;
            }
            else if (lowercaseChars.indexOf(passwd.charAt(i)) !== -1) {
                continue;
            }
            else if (uppercaseChars.indexOf(passwd.charAt(i)) !== -1) {
                continue;
            }
            else if (numbers.indexOf(passwd.charAt(i)) !== -1) {
                continue;
            }
            else {
                // Verbotenes Zeichen nicht bereits erfasst
                if (containedIllegalChars.indexOf(passwd.charAt(i)) === -1) {
                    containedIllegalChars += passwd.charAt(i);
                }
            }
        }
        return containedIllegalChars;
    }
    
    function e3dcCheckPassword(pass) {
        var passwd = pass;
        var results = $(".e3dcPasswordStatus");
        var prevStatus = $(".e3dcPasswordStatus");
        var resultString = "";
        var illegalChars = "";
        
        if (e3dcContainsUpperAndLowercase(passwd)) {
            resultString += '<li class="e3dc-password-success">&#10003; Passwort enthält Groß- und Kleinschreibung</li>';
        } else  {
            resultString += '<li class="e3dc-password-error">&#10005; Passwort enthält Groß- und Kleinschreibung</li>';
        }
        if (e3dcPasswordLongEnough(passwd)) {
            resultString += '<li class="e3dc-password-success">&#10003; Passwort ist mindestens 8 Zeichen lang</li>';
        } else  {
            resultString += '<li class="e3dc-password-error">&#10005; Passwort ist mindestens 8 Zeichen lang</li>';
        }
        illegalChars = e3dcContainsIllegalChar(passwd);
        if (illegalChars.length > 0) {
            resultString += '<li class="e3dc-password-error">&#10005; Folgende Zeichen sind nicht erlaubt: ' + illegalChars + '</li>';
        }
        
        if (prevStatus.length !== 0){
            if (prevStatus.html().indexOf("Altes Passwort") < 0) {
                results.html(resultString);
            } else {
                var statusOldPass = $("li:contains('Altes Passwort')");
                results.html(resultString);
                results.prepend(statusOldPass);
            }                
        } else {
            results.html(resultString);
        }
                        
        if (e3dcContainsUpperAndLowercase(passwd) && e3dcPasswordLongEnough(passwd) && illegalChars.length === 0){
            return true;
        } else {
            return false;
        }
    }                 
}

function validateNewPassword() {
    var password1 = $("#passwordNew").val();
    var password2 = $("#passwordNewConfirm").val();
    var passConfirmed = false;
    var resultString;
    if (password1.length >0 && password1 == password2) {  
        resultString = '<li style="padding-bottom:0px;" class="e3dc-password-success">&#10003; Passwort und Bestätigung stimmen überein</li>';    
        passConfirmed = true;    
                   
    }
    else {               
        resultString = '<li style="padding-bottom:0px;" class="e3dc-password-error">&#10005; Passwort und Bestätigung stimmen überein</li>';  
        passConfirmed = false;    
                  
    }                
    if ($(".e3dcPasswordStatus").html().indexOf("Passwort und Bestätigung stimmen überein") < 0){
        $(".e3dcPasswordStatus").append(resultString);
    } else {
        if (passConfirmed){
            $("li:contains('Passwort und Bestätigung stimmen überein')").removeClass("e3dc-password-error").addClass("e3dc-password-success");                     
            $("li:contains('Passwort und Bestätigung stimmen überein')").html("&#10003; Passwort und Bestätigung stimmen überein");    
                       
        } else {
            $("li:contains('Passwort und Bestätigung stimmen überein')").removeClass("e3dc-password-success").addClass("e3dc-password-error"); 
            $("li:contains('Passwort und Bestätigung stimmen überein')").html("&#10005; Passwort und Bestätigung stimmen überein");
            
        }
    }   
    return  passConfirmed;            
} 

// (function($) {
//     $.fn.onEnter = function(func) {
//         this.bind('keypress', function(e) {
//             if (e.keyCode == 13) func.apply(this, [e]);    
//         });               
//         return this; 
//      };
// })(jQuery);

// $( function () {
// 	$("#password").onEnter( function() {
//         login();
//     });
// });

$.extend({
    getUrlParameters: function(){
        var parameters = [], hash;
		
		if(window.location.href.match(/(javascript|src|onerror|%|<|>)/g) != null ){
			console.error("special Chars in URL detected");
			return parameters;
		}
		
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++){
            hash = hashes[i].split('=');
            parameters.push(hash[0]);
            parameters[hash[0]] = hash[1];
        }
        return parameters;
    },
    getUrlParameter: function(name){
        return $.getUrlParameters()[name];
    }
});		

function showUpdatePassword(strPassword){
    return new Promise(function(resolve, reject){
        var textHTML = '<div id="IDUPDATEPASSWORD" style=""><p style="text-align: center">Bitte aktualisieren Sie Ihr Passwort.</p><br><table style="width: 100%"><colgroup><col width="*"/><col width="340px"/><col width="*"/></colgroup><tr><td></td><td style="text-align: center"><input type="text" name="usernameNewPass" id="usernameNewPass" placeholder="Benutzername" /></td><td></td></tr><tr><td></td><td style="text-align: center"><input type="password" name="passwordOld" id="passwordOld" placeholder="Altes Passwort" /></td><td></td></tr><tr><td></td><td style="text-align: center"><input type="password" id="passwordNew" value="" placeholder="Neues Passwort" /></td><td></td></tr><tr><td></td><td style="text-align: center"><input type="password" id="passwordNewConfirm" value="" placeholder="Bestätigung des neuen Passworts" /></td><td></td></tr><tr><td></td><td style="text-align: center"><br><button id="saveAndLogin">Speichern</button></td><td></td></tr></table><br><ul id="3dcPasswordStatus" class="e3dcPasswordStatus" style=""></ul></div>';
        var testPassword = false;
        var validationResult = false;
        var statusOldPassword = false;
        setStyleUpdatePasswordContainer();
        viewMainOverLay('',textHTML);
        passwordTest("x");
        $('#closeButtonMainOverlay').hide();
        $("#usernameNewPass").val($("#username").val());   
        $("#usernameNewPass").prop("readonly", true); 
        
        $("#passwordOld").keyup(function(){
            if (checkCurrPass(strPassword)){
                var resultString = '<li style="padding-bottom:0px;" class="e3dc-password-success">&#10003; Altes Passwort</li>';                    
                statusOldPassword = true;
            }
            else {
                var resultString = '<li style="padding-bottom:0px;" class="e3dc-password-error">&#10005; Altes Passwort</li>';
                statusOldPassword = false; 
            }     
            if ($(".e3dcPasswordStatus").html().indexOf("Altes Passwort") < 0){
                $(".e3dcPasswordStatus").prepend(resultString);
            } else {
                var textPasswordNotEqual = $(".e3dcPasswordStatus").text().indexOf("Altes Passwort");                
                if ($(".e3dcPasswordStatus").text().charAt(textPasswordNotEqual-2) === "\u2715" && resultString.indexOf("e3dc-password-error") < 0){
                    $("li:contains('Altes Passwort')").removeClass("e3dc-password-error").addClass("e3dc-password-success");                     
                    $("li:contains('Altes Passwort')").html("&#10003; Altes Passwort");               
                } else {
                    $("li:contains('Altes Passwort')").removeClass("e3dc-password-success").addClass("e3dc-password-error"); 
                    $("li:contains('Altes Passwort')").html("&#10005; Altes Passwort");
                }
            }  
        })  
        
        $("#passwordNew").keyup(function(){
            testPassword = passwordTest($("#passwordNew").val());
            validateNewPassword();
        });
        $("#passwordNewConfirm").keyup(function(event){
            if (event.shiftKey) {
                
            } else {
                validationResult = validateNewPassword();
            }            
        });
        $('#saveAndLogin').on('click', function(){
            $(document).off("keydown", disableF5);                    
            var newPass = $("#passwordNew").val();
            if (statusOldPassword && testPassword && validationResult){
                var req = "DO=UPDATEPASSWORD&password="+b64EncodeUnicode(newPass);
                dataProxy.http.request(req).then(function(data) {  
                    try {           
                        // localforage.setItem("passwd",rsa.encrypt(newPass)); 
                        localforage.setItem("passwd",md5(newPass)); 
                        closeUpdatePassword();                           
                    } catch (e) {
                        console.error(e);
                    }
                }, function(err){
                    console.error(err);
                }); 
                resolve(true);               
            } 
        });
        
        function setStyleUpdatePasswordContainer(){
            $(".mainOverlayContent").width("700px");
            $(".mainOverlayContent").height("500px");
            $(".mainOverlayContent").css("left", -350);            
            $("#mainOverlayHTML").css("margin-top", "30px");
            $("#mainOverlayHTML").css("margin-left", "40px");
            $("#mainOverlayHTML").css("margin-right", "40px");
            $("#mainOverlayHTML").css("margin-bottom", "40px");
            $("#mainOverlayHTML").css("height", "400px");
            $("#mainOverlayHTML").css("overflow-y", "auto");
            $(".mainOverlayCenter").css("width", "32px");
            $(".mainOverlayCenter").css("left", "359px");
            $("#closeButtonMainOverlay").css("padding-left", "0px");
            $("#closeButtonMainOverlay").css("padding-right", "0px");
            $("#closeButtonMainOverlay").css("background-color", "#fff");
            $("#closeButtonMainOverlay").html("<img src='images/delete.svg' style='width: 32px; vertical-align: middle;padding-top: 9px' />");
        }
        
        function closeUpdatePassword() {
            $('#mainOverlay').fadeOut(0);
            $(".mainOverlayContent").width("820px");
            $(".mainOverlayContent").height("620px");
            $(".mainOverlayContent").css("left", -410);
            $('#mainOverlayNavigationBottom').remove();
            $("#mainOverlayHTML").css("height", "auto");
            $("#mainOverlayHTML").css("overflow-y", "none");
            $("#closeButtonMainOverlay").css("background-color", "#000");
            $("#closeButtonMainOverlay").html("close");
            $(".mainOverlayCenter").css("width", "32px");
            $(".mainOverlayCenter").css("left", "349px");
            $("#closeButtonMainOverlay").css("padding-left", "0px");
            $("#closeButtonMainOverlay").css("padding-right", "0px");     
            $("#mainOverlayHTML").css("margin-top", "0px");
            $("#mainOverlayHTML").css("margin-left", "0px");
            $("#mainOverlayHTML").css("margin-right", "0px");
            $("#mainOverlayHTML").css("margin-bottom", "0px");      
            $('#closeButtonMainOverlay').show();  
            $('#closeButtonMainOverlay').prop('onclick',null).off('click');
            $('#closeButtonMainOverlay').on('click', revertOnClick);            
        }
        
        function revertOnClick(){        
            $('#mainOverlay').fadeOut(700);   
        };                
        
    });
}

function showTipsOfTheDay() {    
    var currentTipPos = 0;
    var arrayOfTips;
    var inSurveyTable;
    var statusSurvey;
    
    inSurveyTable =  checkSurveyLink();
    inSurveyTable.then(function(result){
        if (result[0]["inSurveyTable"] === "0"){
            statusSurvey = false;
        } else {
            statusSurvey = true;
        }
        dataProxy.http.request("DO=GETTIPSOFTHEDAYDATA").then(function(data){
            if (data.length > 0) {                                
                arrayOfTips = data;
                for (var i=0; i < arrayOfTips.length; i++){                                        
                    if (arrayOfTips[i]["status"] === "SURVEY" && !statusSurvey) {
                        arrayOfTips.splice(i, 1);
                    }
                    if (arrayOfTips[i]["status"] === "POLICY" && arrayOfTips[i]["counter"] > 10) {
                        arrayOfTips.splice(i, 1);
                    }
                    if (arrayOfTips.length > 0){
                        if (arrayOfTips[i]["platform"] === "APP") {
                            arrayOfTips.splice(i, 1);
                        }
                    }
                }
                if (arrayOfTips.length > 0){
                    showFirstTip();              
                    $('#closeButtonMainOverlay').prop('onclick',null).off('click');
                    $('#closeButtonMainOverlay').on('click', closeTipsOfTheDay);    
                }                
            } 
            },function(err){
            console.error(err);        
        });
    });
                             
    function checkSurveyLink(){
        return dataProxy.http.request("DO=CHECKSURVEYLINK").then(function(result) {             
            return result;                                      
        },function(err){
            console.error(err);        
        });
    }

    function showFirstTip(){
        setStyleTipsContainer();        
        viewMainOverLay('',arrayOfTips[0].message);        
        currentTipPos++;
        showTipPosition(currentTipPos);
    }
    
    function showNextTip(){
        if (currentTipPos < arrayOfTips.length){
            viewMainOverLay('',arrayOfTips[currentTipPos].message);            
            currentTipPos++;
            showTipPosition(currentTipPos);
        }
    }
    
    function showPrevTip(){
        if (currentTipPos > 1){
            viewMainOverLay('',arrayOfTips[currentTipPos-2].message);            
            currentTipPos--;
            showTipPosition(currentTipPos);
        }
    }
    
    function showTipPosition(currTipPos){
        var textTipCurrentPosition = currTipPos + " / " + arrayOfTips.length;
        $("#positionTipsMainOverlay").html(textTipCurrentPosition);
        if (arrayOfTips[currTipPos-1].timestamp_DontShow){
            $('#checkboxOtionShowTip').prop('checked', true);
        } else {
            $('#checkboxOtionShowTip').prop('checked', false);
        }
        if (arrayOfTips[currTipPos-1].status === "MANDATORY"){
            $('#optionShowTipsDivMainOverlay').hide();
        } else {
            $('#optionShowTipsDivMainOverlay').show();
        }
        if (arrayOfTips[currTipPos-1].status === "POLICY"){
            $('#checkBoxShowTipText').html(language.gE('451M0'));
        } else {
            $('#checkBoxShowTipText').html(language.gE('435M0'));
        }
        updateOptionShowTip();
    }
    
    function setStyleTipsContainer(){
        setTimeout(function(){
            $("#IDROOT").css("opacity", 0.1);
        }, 400);
        
        $("#mainOverlayHTML").css("margin-top", "30px");
        $("#mainOverlayHTML").css("margin-left", "40px");
        $("#mainOverlayHTML").css("margin-right", "40px");
        $("#mainOverlayHTML").css("margin-bottom", "40px");
        $("#mainOverlayHTML").css("height", "475px");
        $("#mainOverlayHTML").css("overflow-y", "auto");
        $(".mainOverlayCenter").css("width", "32px");
        $(".mainOverlayCenter").css("left", "359px");
        $("#closeButtonMainOverlay").css("padding-left", "0px");
        $("#closeButtonMainOverlay").css("padding-right", "0px");
        $("#closeButtonMainOverlay").css("background-color", "#fff");
        $("#closeButtonMainOverlay").html("<img src='images/delete.svg' style='width: 32px; vertical-align: middle;padding-top: 9px' />");
        if (arrayOfTips.length > 1) {            
            var $buttonPrev = $("<span id='prevButtonMainOverlay' style='cursor:pointer;color:#fff;padding-left:3px;padding-right: 3px;margin-left: 10px;margin-right: 10px'><img src='images/previous-button.svg' style='width: 32px; vertical-align: middle;padding-top: 0px' /></span> ");
            var $buttonNext = $("<span id='nextButtonMainOverlay' style='cursor:pointer;color:#fff;padding-left:3px;padding-right: 3px;margin-left: 10px;margin-right: 10px'><img src='images/next-button.svg' style='width: 32px; vertical-align: middle;padding-top: 0px' /></span> ");
            var $positionTips = $("<span id='positionTipsMainOverlay' style='padding-left:3px;padding-right: 3px;margin-right: 10px;margin-left: 10px;'></span> ");
            var $optionShowTips = $("<div id='optionShowTipsDivMainOverlay' style=''><input type='checkbox' id='checkboxOtionShowTip' />  <span id='checkBoxShowTipText'>" + language.gE('435M0') + "</span></div> ");
            var $mainOverlayNavigationBottom = $("<div id='mainOverlayNavigationBottom' class ='mainOverlayNavigationBottom'><div id='navigationLine1'></div><div id='navigationLine2' style='margin-top: 20px; width: 100%; text-align: center'></div></div>");
            $("#mainOverlayHelper").append($mainOverlayNavigationBottom);
            $("#navigationLine1").append($optionShowTips);
            $("#navigationLine2").append($buttonPrev); 
            $("#navigationLine2").append($positionTips);
            $("#navigationLine2").append($buttonNext);                                               
            $(document).on('click', '#prevButtonMainOverlay' , function() {
                showPrevTip();
            });
            $(document).on('click', '#nextButtonMainOverlay' , function() {
                showNextTip();
            });
            $("#checkboxOtionShowTip").on("change", updateOptionShowTip);             
        } else {
            var $mainOverlayNavigationBottom = $("<div id='mainOverlayNavigationBottom' class ='mainOverlayNavigationBottom'><div id='navigationLine1'></div><div id='navigationLine2' style='margin-top: 30px; width: 100%; text-align: center'></div></div>");            
            var $optionShowTips = $("<div id='optionShowTipsDivMainOverlay' style='padding-top: 20px'><input type='checkbox' id='checkboxOtionShowTip' />  <span id='checkBoxShowTipText'>" + language.gE('435M0') + "</span></div> ");
            $("#mainOverlayHelper").append($mainOverlayNavigationBottom);
            $("#navigationLine1").append($optionShowTips);
            $("#checkboxOtionShowTip").on("change", updateOptionShowTip);
        }
    }
    
    function closeTipsOfTheDay() {
        $("#IDROOT").css("opacity", 1);
        $('#mainOverlay').fadeOut(0);
        $('#mainOverlayNavigationBottom').remove();
        $("#mainOverlayHTML").css("height", "auto");
        $("#mainOverlayHTML").css("overflow-y", "none");
        $("#closeButtonMainOverlay").css("background-color", "#000");
        $("#closeButtonMainOverlay").html("close");
        $(".mainOverlayCenter").css("width", "32px");
        $(".mainOverlayCenter").css("left", "349px");
        $("#closeButtonMainOverlay").css("padding-left", "0px");
        $("#closeButtonMainOverlay").css("padding-right", "0px");     
        $("#mainOverlayHTML").css("margin-top", "0px");
        $("#mainOverlayHTML").css("margin-left", "0px");
        $("#mainOverlayHTML").css("margin-right", "0px");
        $("#mainOverlayHTML").css("margin-bottom", "0px");        
        $('#closeButtonMainOverlay').prop('onclick',null).off('click');
        $('#closeButtonMainOverlay').on('click', revertOnClick);
    }
    
    function revertOnClick(){  
        $("#IDROOT").css("opacity", 1);      
        $('#mainOverlay').fadeOut(700);
    };
    
    function updateOptionShowTip(){
        var optionDontShow = $("#checkboxOtionShowTip").is(":checked");
        if (optionDontShow){
            arrayOfTips[currentTipPos-1].timestamp_DontShow = true;
        } else {
            arrayOfTips[currentTipPos-1].timestamp_DontShow = false;
        }
        dataProxy.http.request("DO=UPDATEOPTIONSHOWTIP&idTip="+arrayOfTips[currentTipPos-1].idTipsOfTheDay+"&optionDontShow="+optionDontShow).then(function(data) {                                  
        
        },function(err){
            console.error(err);
        });
    }
        
}

function b64EncodeUnicode(str) {
    // first we use encodeURIComponent to get percent-encoded UTF-8,
    // then we convert the percent encodings into raw bytes which
    // can be fed into btoa.
    var percentEncodedUTF8 = encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,
    function toSolidBytes(match, p1) {
        return String.fromCharCode('0x' + p1);
    })  
    var encodedBase64 = btoa(percentEncodedUTF8);
   
    return encodedBase64;
}

function resetPasswordForm(){
    $("#IDLOGINCONTENT").hide();
    $("#IDLOGINOVERLAY").show();
}

function resetPasswordRequest(){
    var username = $("#usernameResetPassword").val();    
    if (username === "e3dc" || username === "referenz" || username === "messe" || username === "referenz" || username === "e3dc-dev.user"
         || username === "e3dc-dev.service" || username === "e3dc-dev.partner" || username === "e3dc-dev.owner" || username === "e3dc-dev.inst"){
        AXAlert("Das Passwort des Nutzer ist unveränderlich");
        closeResetPasswordForm();
    } else {
        dataProxy.http.request("DO=RESETPASSWORDREQUEST&username="+username).then(function(data) {                                          
            AXAlert(data);
            closeResetPasswordForm();
        },function(err){
            console.error(err);
        });  
    }    
}

function closeResetPasswordForm(){
    $("#IDLOGINOVERLAY").hide();
    $("#IDLOGINCONTENT").show();
}

function saveNewPassword(token){
    if (newPass()){
        var password = $("#fm-pass1").val();
        dataProxy.http.request("DO=RESETPASSWORD&id="+token+"&password="+b64EncodeUnicode(password)).then(function(data) { 
            if (data[0][0]["ERRNO"] === "0"){
                localforage.getItem("loginsave").then(function(save){
                    if(save > 0){
                        localforage.getItem("username").then(function(user){
                            if (user === data[1][0]["username"]){
                                // localforage.setItem("passwd",rsa.encrypt(password)).then(function(){
                                localforage.setItem("passwd",md5(password)).then(function(){
                                   forwardToLogin();           
                                });
                            }
                            else {
                                forwardToLogin();
                            }
                        });                                                
                    } else {
                        forwardToLogin();
                    }
                },function(err){
                    forwardToLogin();
                    console.error(err);
                });                
            } else {
                if (data[1][0]["ERRMSG"] === "11"){
                    AXAlert("Passwort wurde nicht gespeichert.<br>neues Passwort = altes Passwort");
                } else {
                    AXAlert("Passwort wurde nicht gespeichert.");
                }                
            }                                                               
        },function(err){
            console.error(err);
        });       
    }
    function forwardToLogin(){
         var re = new RegExp(/^.*\//);
         window.location.href = re.exec(window.location.href);
    }
}

$(document).ready(function(){
	$("#fm-pass1").keyup(function() {
        userCheckPassword();
        validateNewP();
        setHeightFormChangePassword();
    });
    $("#fm-pass2").keyup(validateNewP);	  
});

function setHeightFormChangePassword(){
    $("#IDLOGINOVERLAY").height(490);
    if ($("#fm-pass1").val() === ""){
        $("#IDLOGINOVERLAY").height(387);
    }
}

function userCheckPassword() {
    var passwd = $("#fm-pass1").val();
    var results = $(".userPasswordStatus");
    var resultString = "";
    var illegalChars = "";
    
    if (passwd.length > 0){
        $("#infoPassword").show();
    } else {
        $("#infoPassword").hide();
    }
    
    if (userContainsNumberOrSpecial(passwd)) {
        resultString += '<li style="padding-top:10px;margin-left: -12px" class="user-password-success">&#10003; Ziffer oder Sonderzeichen im Passwort</li>';
    } else  {
        resultString += '<li style="padding-top:10px;margin-left: -12px" class="user-password-error">&#10005; Ziffer oder Sonderzeichen im Passwort</li>';
    }
    if (userContainsUpperAndLowercase(passwd)) {
        resultString += '<li style="margin-left: -12px" class="user-password-success">&#10003; Groß- und Kleinschreibung im Passwort</li>';
    } else  {
        resultString += '<li style="margin-left: -12px" class="user-password-error">&#10005; Groß- und Kleinschreibung im Passwort</li>';
    }
    if (userPasswordLongEnough(passwd)) {
        resultString += '<li style="padding-bottom:0px;margin-left: -12px" class="user-password-success">&#10003; Passwort mindestens 8 Zeichen lang</li>';
    } else  {
        resultString += '<li style="padding-bottom:0px;margin-left: -12px" class="user-password-error">&#10005; Passwort mindestens 8 Zeichen lang</li>';
    }
    illegalChars = userContainsIllegalChar(passwd);
    if (illegalChars.length > 0) {
        resultString += '<li style="padding-bottom:0px;margin-left: -12px" class="user-password-error">&#10005; Folgende Zeichen sind nicht erlaubt: ' + illegalChars + '</li>';
    }
    results.html(resultString);  
    // validateNewP();      
    if (userContainsNumberOrSpecial(passwd) && userContainsUpperAndLowercase(passwd) && userPasswordLongEnough(passwd) && illegalChars.length === 0){
        return true;
    } else {
        return false;
    }                
}    

function validateNewP() {
    var password1 = $("#fm-pass1").val();
    var password2 = $("#fm-pass2").val();
    if(password1 == password2) {
        $("#fm-pass2").css({"background-color": "#B2E0C1"});   
        var resultString = '<li style="padding-bottom:10px;margin-left: -12px" class="user-password-success">&#10003; Passwort und Bestätigung übereinstimmen</li>';                   
    }
    else {
        $("#fm-pass2").css({"background-color": "#FF8585"});                 
        var resultString = '<li style="padding-bottom:10px;margin-left: -12px" class="user-password-error">&#10005; Passwort und Bestätigung übereinstimmen</li>';                
        }                
    if ($(".userPasswordStatus").html().indexOf("Passwort und Bestätigung übereinstimmen") < 0){
        $(".userPasswordStatus").append(resultString);
    } else {
        var textPasswordNotEqual = $(".userPasswordStatus").text().indexOf("Passwort und Bestätigung übereinstimmen");                
        if ($(".userPasswordStatus").text().charAt(textPasswordNotEqual-2) === "\u2715" && resultString.indexOf("user-password-error") < 0){
            $("li:contains('Passwort und Bestätigung übereinstimmen')").removeClass("user-password-error").addClass("user-password-success");                     
            $("li:contains('Passwort und Bestätigung übereinstimmen')").html("&#10003; Passwort und Bestätigung übereinstimmen");                 
        } else {
            $("li:contains('Passwort und Bestätigung übereinstimmen')").removeClass("user-password-success").addClass("user-password-error"); 
            $("li:contains('Passwort und Bestätigung übereinstimmen')").html("&#10005; Passwort und Bestätigung übereinstimmen");
        }
    }                
}   

function userPasswordLongEnough(passwd) {    
    if (passwd.length > 7) {
        return true;
    }
    else {
        return false;
    }
}

function userContainsNumberOrSpecial(passwd) {
    var i;
    var specialChars = "-+|@_\"/\\;:.,# ";
    var containsNumber = false;
    var containsSpecial = false;
    for (i = 0; i < 10; i++) {
        if (passwd.indexOf(i) !== -1) {
            containsNumber = true;
        }
    }
    for (i = 0; i < specialChars.length; i++) {
        if (passwd.indexOf(specialChars.charAt(i)) !== -1) {
            containsSpecial = true;
        }
    }
    if (containsNumber || containsSpecial) {
        return true;
    }
    else {
        return false;
    }
}

function userContainsUpperAndLowercase(passwd) {
    var i;
    var lowercaseChars = "qwertzuiopüasdfghjklöäyxcvbnmß";
    var uppercaseChars = "QWERTZUIOPÜASDFGHJKLÖÄYXCVBNM";
    var containsUpper = false;
    var containsLower = false;
    for (i = 0; i < lowercaseChars.length; i++) {
        if (passwd.indexOf(lowercaseChars.charAt(i)) !== -1) {
            containsLower = true;
        }
    }
    for (i = 0; i < uppercaseChars.length; i++) {
        if (passwd.indexOf(uppercaseChars.charAt(i)) !== -1) {
            containsUpper = true;
        }
    }
    if (containsLower && containsUpper) {
        return true;
    }
    else {
        return false;
    }
}

function userContainsIllegalChar(passwd) {
    var i;
    var specialChars = "-+|@_\"/\\;:.,# ";
    var lowercaseChars = "qwertzuiopüasdfghjklöäyxcvbnmß";
    var uppercaseChars = "QWERTZUIOPÜASDFGHJKLÖÄYXCVBNM";
    var numbers = "0123456789";
    var containedIllegalChars = "";
    
    for (i = 0; i < passwd.length; i++) {
        if (specialChars.indexOf(passwd.charAt(i)) !== -1) {
            continue;
        }
        else if (lowercaseChars.indexOf(passwd.charAt(i)) !== -1) {
            continue;
        }
        else if (uppercaseChars.indexOf(passwd.charAt(i)) !== -1) {
            continue;
        }
        else if (numbers.indexOf(passwd.charAt(i)) !== -1) {
            continue;
        }
        else {
            // Verbotenes Zeichen nicht bereits erfasst
            if (containedIllegalChars.indexOf(passwd.charAt(i)) === -1) {
                containedIllegalChars += passwd.charAt(i);
            }
        }
    }
    return containedIllegalChars;
}
    
function newPass() {
    var pass = false;            
    var data = $("#fm-pass1").val();
    var passwordCheck = userCheckPassword();
    var len = data.length;
    if (len < 1) {
        AXAlert("Kennwort darf nicht leer sein");
    } else
        if ($("#fm-pass1").val() !== $("#fm-pass2").val() || !passwordCheck) {
            if ($("#fm-pass1").val() !== $("#fm-pass2").val()){
                AXAlert("Kennwort und Kennwort bestätigen nicht übereinstimmen");
            } else if (!passwordCheck){
                AXAlert("Beachten Sie bei der Wahl des neuen Kennworts die Richtlinien für neue Kennwörter");
            }                
    } else {
        pass = true;
    }         
    return pass;
}  

</script>    </head>
    <body>

                <script>
                var rsa = new RSAKey();
        rsa.setPublic('B24E76765683BC39F475C88A0D7C35ECB5055CDCB36BA5446102F10682F4A31CC002E6637A14CE26D02D354ABE42DDAF1C326A3D9F7281DD9C7FC288063DF820EFCE7B8030E44ADF5F07CFA3D5A7474EF9E8867CC8F2FF2EE4CA7A954448683F3A031A9BD4719B189E9EC03A224A1B39EF969B7CACEAE281C7CB0715C94C25DB', '010001');
    </script>
    <div id="IDLOGINDIV">
        <div id="IDLOGINCONTENT">
            <div id="IDLOGINMOVE">
                <img src='images/E3DC/logo1x1-v1.svg' alt='' width="128" height="128" />
                <h1>
                    Welcome to the&nbsp;E3DC&nbsp;portal.</h2>
                    <p>To use this portal, you have to be logged in.</p>
                    <form onsubmit="login();return false;">
                        <table style="width: 100%">
                            <colgroup>
                                <col width="*" />
                                <col width="340px" />
                                <col width="*" />
                            </colgroup>
                            <tr>
                                <td></td>
                                <td style="text-align: center"><input type="text" name="username" id="username" placeholder="username" /></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td style="text-align: center"><input type="password" name="password" id="password" placeholder="password" /></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td style="text-align: center"><button type="submit">Login</button><input type="checkbox" class="css-checkbox" id="radiosavelogin"><label for="radiosavelogin" title="remember login data." class="css-label"></label></td>
                                <td></td>
                            </tr>
                        </table>
                    </form>
                    <div style="width:90%;margin:auto">
                        <div class="tiny" style="width: 93px;text-align: left;padding-top: 16pt;display: inline-block;cursor:pointer" id="forgetPassword" onclick="resetPasswordForm();"><u>Passwort vergessen?</u></div>
                        <div class="tiny" style="width: 200px;text-align: right;padding-top: 16pt;display: inline-block;">&copy; Copyright <a href="http://www.e3dc.com" target="_blank"><span class="link">E3DC</span></a> | <a href="datenschutz.html" target="_blank"><span class="link">Datenschutz</span></a> | <a href="https://www.e3dc.com/deutsch/impressum.html" target="_blank"><span class="link">Imprint</span></a></div>
                    </div>
            </div>
        </div>
        <div id="IDLOGINOVERLAY" style="display:none">
            <img src='images/E3DC/logo1x1-v1.svg' alt='' width="128" height="128" />
            <h1>Passwort zurücksetzen</h1>
            <p>Bitte geben Sie ihren Benutzernamen ein.<br> Sie erhalten eine E-Mail mit dem Aktivierungslink,<br> an die in ihrem Profil hinterlegte, Adresse.</p>
            <table style="width: 100%">
                <colgroup>
                    <col width="*" />
                    <col width="400px" />
                    <col width="*" />
                </colgroup>
                <tr>
                    <td></td>
                    <td style="text-align: center"><input type="text" name="usernameResetPassword" id="usernameResetPassword" placeholder="username" /></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>&nbsp;</td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td style="text-align: center"><button onclick="resetPasswordRequest();">Passwort anfordern</button>&nbsp;<button onclick="closeResetPasswordForm();">Abbrechen</button></td>
                    <td></td>
                </tr>
            </table>
        </div>
    </div>
<script>window.THEMEN = "E3DC";</script><script>var DEBUG=false;</script>    <div id="mainOverlay" class="mainOverlay">
        <div id="mainOverlayHelper" class="mainOverlayHelper">
            <div id="mainOverlayCenter" class="mainOverlayCenter">
                <img id="closeButtonMainOverlay" style="cursor:pointer;margin-left: 57px;" onclick="$('#mainOverlay').fadeOut(700); " src="images/close_small.png"></img>
            </div>
            <div id="mainOverlayContent" class="mainOverlayContent">
                <b id="mainOverlayHeadline">Hilfe/Erklärung</b><br>
                <div id='mainOverlayHTML'></div>
            </div>
        </div>
    </div>

    <div id="IDROOT" style="display:none;">

        <div id="IDHEADER">


            <div id="IDMENU">
                <div id="IDMENU_MAIN">
                    <!--<div id="cssmenu">-->
                                        <!--</div>					-->
                </div>
            </div>
            <div id="IDMENUIMAGE">
                <img src='images/E3DC/logo1x1-v1.svg' width="160" height="160" />
                <div id="IDCSN" class="tooltipNDA">

                </div>
            </div>
            <div class="clear-both"></div>

        </div>
        <div id="IDCONTENT">
            <div id="IDSIDEBARCONTAINER">
                <div id="IDSIDEBAR">
                    <div id="SIDEBARCONTAINER" class="free-wall" style="z-index:1299"></div>
                    <div id="SUBSIDEBARCONTAINER" class="free-wall" style="display: none;position:absolute;z-index:1299;left: 270px;top:310px;width:267px;"></div>
                    <div id="SUBSIDEBARGRIDMENUCONTAINER" class="free-wall sub-grid-menu" style="display: none;position:absolute;z-index:1299;left: 270px;top:310px;width:267px;"></div>
                    <div id="BACKGROUND-SUBSIDEBARCONTAINER" style="display: none;position:absolute;z-index:1298;left: 270px;top:310px;width:267px;background-color:grey;opacity:0.3;-moz-border-radius: 0 5px 5px 0;
        			border-radius: 0 5px 5px 0;"></div>
                    <div id="BACKGROUND-SIDEBARCONTAINER" style="display: none;position:absolute;z-index:1298;left: 270px;top:310px;width:267px;background-color:grey;opacity:0.3;-moz-border-radius: 5px 0 0 5px;
        			border-radius: 5px 0 0 5px;"></div>
                </div>
            </div>
            <div id="IDCONTENTMAIN"></div>
            <div id="IDCONTENTREACT"></div>
        </div>
        <div id="IDFOOTER"></div>
    </div>
    <script type="text/javascript" src="js/react_vendor.js"></script>
    <script type="text/javascript" src="js/react_root.js"></script>
    <script src="https://a.e3dc.com/script.js" data-site="JWKDIOWB" defer></script>
    <script type="text/javascript" src="js/main.js"></script>            <noscript>
                <div style="display:block;position:relative;z-index:300000;background-color: #fdfdfd;padding: 200px;">
                    <img src="images/240.png" /><br>
                    <h2>Technischer Hinweis</h2>
                    <p>
                        Wenn Sie diesen Text lesen ist Javascript in Ihrem Browser deaktiviert. Um diese
                        Seite nutzen zu können ist Javascript notwenig.<br>
                        <br>
                        Ihr E3/DC Team
                    </p>
                </div>
            </noscript>
    </body>
    

</html>
